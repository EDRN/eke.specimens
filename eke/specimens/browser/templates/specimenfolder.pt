<html xmlns='http://www.w3.org/1999/xhtml'
    xml:lang='en'
    lang='en'
    xmlns:tal='http://xml.zope.org/namespaces/tal'
    xmlns:metal='http://xml.zope.org/namespaces/metal'
    xmlns:i18n='http://xml.zope.org/namespaces/i18n'
    metal:use-macro='context/main_template/macros/master'
    i18n:domain='eke.specimens'>
    <head>
        <title>Specimen Folder</title>
    </head>
    <body>
        <metal:main fill-slot='main'>
            <tal:main-macro metal:define-macro='main'
                tal:define='
                    haveSpecimensAtSites view/haveSpecimensAtSites;
                    contents             view/specimensAtSites;
                    kssClassesView       context/@@kss_field_decorator_view;
                    getKssClasses        nocall:kssClassesView/getKssClassesInlineEditable;
                    templateId           template/getId;
                    isManager            python:checkPermission("Manage portal", context);
                    portalURL            context/@@plone_portal_state/portal_url;
                '>
                <div tal:replace='structure provider:plone.abovecontenttitle' />
                <h1 class='documentFirstHeading'> 
                    <metal:field use-macro='python:context.widget("title", mode="view")'>
                        Title
                    </metal:field>
                </h1>

                <div tal:replace='structure provider:plone.belowcontenttitle' />
                <p class='documentDescription'>
                    <metal:field use-macro='python:context.widget("description", mode="view")'>Description.</metal:field>
                </p>
                <div tal:replace='structure provider:plone.abovecontentbody' />

                <ul tal:condition='python:context.showERNELink or context.showReferenceSets'>
                    <li tal:condition='context/showERNELink'>
                        <a i18n:translate='erneSearchEDRNforSpecimens' href='https://ginger.fhcrc.org/edrn/imp/GateServlet?pwd='>
                            ERNE: Search EDRN for Specimens
                        </a>
                    </li>
                    <li tal:condition='context/showReferenceSets'>
                        <a href='/resources/sample-reference-sets' i18n:translate='sampleReferenceSets'
                            tal:attributes='href string:${portalURL}/resources/sample-reference-sets'>
                            Sample Reference Sets
                        </a>
                    </li>
                </ul>

                <h2 i18n:translate='specimenFolder_inThisFolder'>Sites Collecting Specimens</h2>
                <p tal:condition='not:haveSpecimensAtSites' i18n:translate='specimenFolder_noSpecimens' class='discreet'>
                    There are currently no specimens in this folder.
                </p>
				<div tal:condition='haveSpecimensAtSites'>
                    <ul>
                        <li tal:repeat='item contents'>
                            <a href='#' tal:attributes='href item/url' tal:content='item/title'>
                                Stupid Site of Stupidity
                            </a>
                        </li>
                    </ul>
                    <h3 i18n:translate='specimenFolder_inventory'>
                        Current Specimen Inventory
                    </h3>
                    <p><img src='#' tal:replace='structure view/specimenChartTag'/></p>
                    <p i18n:translate='specimenFolder_totalSpecs'>
                        Total specimens available:
                        <strong i18n:name='totalSpecimens' tal:content='view/totalSpecimens'>12345</strong>
                        (from <span i18n:name='totalParticipants' tal:replace='view/totalParticipants'>12</span> participants)
                    </p>
				</div>

                <div metal:use-macro='context/document_relateditems/macros/relatedItems'>
                    Any related items
                </div>
                <div tal:replace='structure provider:plone.belowcontentbody' />

            </tal:main-macro>
        </metal:main>
    </body>
</html>
